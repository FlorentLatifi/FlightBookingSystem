@{
    ViewData["Title"] = "Admin Dashboard";
    var stats = ViewBag.Stats as dynamic;
    var hasData = ViewBag.HasData as bool? ?? false;
    var errorMessage = ViewBag.ErrorMessage as string;
}

<!-- Hero -->
<div class="modern-card mb-4" style="background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); color: white;">
    <h1 class="fw-bold mb-3">
        <i class="bi bi-speedometer2 me-2"></i>
        Admin Dashboard
    </h1>
    <p class="lead mb-0">Flight Booking System Management</p>
</div>

@if (!string.IsNullOrEmpty(errorMessage))
{
    <div class="alert alert-warning mb-4">
        <i class="bi bi-exclamation-triangle me-2"></i>
        <strong>Notice:</strong> @errorMessage
        <br />
        <small>The database might not be initialized yet. Please check the connection string and run migrations.</small>
    </div>
}

<!-- Statistics Cards -->
<div class="row mb-4">
    <div class="col-md-4">
        <div class="modern-card text-center">
            <i class="bi bi-airplane-fill" style="font-size: 3rem; color: var(--primary-color);"></i>
            <h3 class="mt-3 mb-1">@(stats?.TotalFlights ?? 0)</h3>
            <p class="text-muted">Total Flights</p>
        </div>
    </div>
    <div class="col-md-4">
        <div class="modern-card text-center">
            <i class="bi bi-people-fill" style="font-size: 3rem; color: var(--success-color);"></i>
            <h3 class="mt-3 mb-1">@(stats?.AvailableSeats ?? 0)</h3>
            <p class="text-muted">Available Seats</p>
        </div>
    </div>
    <div class="col-md-4">
        <div class="modern-card text-center">
            <i class="bi bi-cash-stack" style="font-size: 3rem; color: var(--warning-color);"></i>
            <h3 class="mt-3 mb-1">€@((stats?.TotalRevenue ?? 0m).ToString("N2"))</h3>
            <p class="text-muted">Total Revenue</p>
        </div>
    </div>
</div>

@if (!hasData && string.IsNullOrEmpty(errorMessage))
{
    <div class="alert alert-info mb-4">
        <h4 class="alert-heading">
            <i class="bi bi-info-circle me-2"></i>
            No Data Yet
        </h4>
        <p>The system is ready but there are no flights or reservations in the database yet.</p>
        <hr>
        <p class="mb-0">
            <strong>To seed data:</strong> Run migrations with <code>Update-Database</code> in Package Manager Console
        </p>
    </div>
}

<!-- Quick Actions -->
<div class="modern-card">
    <h4 class="fw-bold mb-3">
        <i class="bi bi-lightning-fill text-warning me-2"></i>
        Quick Actions
    </h4>
    <div class="d-grid gap-2">
        <a asp-action="Flights" class="btn-modern btn-primary-modern">
            <i class="bi bi-airplane me-2"></i>
            Manage Flights
        </a>
        <a asp-action="Reservations" class="btn-modern" style="background: white; color: var(--primary-color); border: 2px solid var(--primary-color);">
            <i class="bi bi-ticket-perforated me-2"></i>
            View All Reservations
        </a>
    </div>
</div>